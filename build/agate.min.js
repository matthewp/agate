((function(){function c(a,b){return a.indexOf(b)!==-1?a:(a.push(b),a)}function d(a,b){var c;if((c=a.indexOf(b))===-1)return a;var d=a.slice(c,c++);return d}"use strict";var a=Array.prototype.slice,b=Array.prototype.splice,e=Backbone.Model.extend({defaults:{text:"",active:!1}}),f=Backbone.View.extend({tagName:"button",className:"agate-button",model:new e,initialize:function(){this.model instanceof e||(this.model=new e(this.model))},render:function(){this.el.textContent=this.model.get("text");if(this.model.get("active")){var a=this.el.className.split(" ");a.push("active"),this.el.className=a.join(" ")}return this}}),g=f.extend({className:"agate-radiobutton"}),h=Backbone.View.extend({buttons:[],events:{"mouseup button":"up","touchend button":"up"},initialize:function(){var a=this.options.buttons;a&&a.length>0&&a[0].model.set("active",!0)},render:function(){var a=this;return a.options.buttons.forEach(function(b){var c=b.render().el;a.el.appendChild(c)}),a},up:function(a){var b=a.target,c=b.className.split(" "),d=c.indexOf("active")!==-1;d||(this.options.buttons.forEach(function(a){var b=a.el.className.split(" ");a.model.set("active",!1),a.el.className=_.without(b,"active").join(" ")}),c.push("active"),b.className=c.join(" "))}}),i=f.extend({tagName:"div",className:"agate-toggle-button",value:!1,events:{mouseup:"up",touchend:"up"},initialize:function(){f.prototype.initialize.call(this),this.value=this.options.value||!1},render:function(){var a=this;f.prototype.render.call(this);if(!this.onEl||!this.offEl||!this.knobEl)this.onEl=this.renderOn(),this.offEl=this.renderOff(),this.knobEl=this.renderKnob();return[this.onEl,this.offEl,this.knobEl].forEach(function(b){a.el.appendChild(b)}),this},renderOn:function(){var a=(new Backbone.View).make,b=a("div",{style:this.value?"":"display: none;","class":"agate-toggle-content on"},"On");return b},renderOff:function(){var a=(new Backbone.View).make,b=a("div",{style:this.value?"display: none;":"","class":"agate-toggle-content off"},"Off");return b},renderKnob:function(){var a=(new Backbone.View).make,b=a("div",{"class":"agate-toggle-button-knob"});return b},up:function(){this.value=!this.value;var a=this.value?this.onEl:this.offEl,b=this.value?this.offEl:this.onEl;a.style.display=null,b.style.display="none"}}),j=Backbone.View.extend({tagName:"div",baseClassName:"agate-checkbox agate-checkbox-img",className:this.baseClassName,checked:!1,events:{mousedown:"down",touchstart:"down"},render:function(){return this.className=this.checked?this.baseClassName+" agate-checkbox-checked":this.baseClassName,this.el.className=this.className,this},down:function(){this.checked=!this.checked,this.render()}}),k=Backbone.Model.extend({defaults:{text:""}}),l=Backbone.View.extend({tagName:"div",className:"agate agate-toolbar agate-toolbar-inline agate-toolbar-centered",model:new k,initialize:function(){this.model instanceof k||(this.model=new k(this.model))},render:function(){return this.el.textContent=this.model.get("text"),this}});this.Agate={Toolbar:k,ToolbarView:l,Button:e,ButtonView:f,RadioButtonView:g,RadioGroupView:h,ToggleButtonView:i,CheckboxView:j}})).call(this);
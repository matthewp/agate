((function(){function c(a,b){return a.indexOf(b)!==-1?a:(a.push(b),a)}function d(a,b){var c;if((c=a.indexOf(b))===-1)return a;var d=a.slice(c,c++);return d}"use strict";var a=Array.prototype.slice,b=Array.prototype.splice,e=Backbone.View.extend({hasClassName:function(a,b){return a?a.split(" ").indexOf(b)!==-1:a},addClassName:function(a,b){if(!a)return a;var c=a.split(" ");return c.indexOf(b)!==-1?a:(c.push(b),c.join(" "))},removeClassName:function(a,b){if(!a)return a;var c=a.split(" "),d;return(d=c.indexOf(b))===-1?a:(c.splice(d,1),c.join(" "))},hasClass:function(a){return this.hasClassName(a)},addClass:function(a){this.className=this.addClassName(this.className,a),this.el&&(this.el.className=this.className)},removeClass:function(a){this.className=this.removeClassName(this.className,a),this.el&&(this.el.className=this.className)}}),f=Backbone.Model.extend({defaults:{text:"",active:!1}}),g=e.extend({tagName:"button",className:"agate-button",model:new f,initialize:function(){this.model instanceof f||(this.model=new f(this.model))},render:function(){return this.el.textContent=this.model.get("text"),this.model.get("active")&&this.addClass("active"),this}}),h=g.extend({className:"agate-radiobutton"}),i=e.extend({buttons:[],events:{"mouseup button":"up","touchend button":"up"},initialize:function(){var a=this.options.buttons;a&&a.length>0&&a[0].model.set("active",!0)},render:function(){var a=this;return a.options.buttons.forEach(function(b){var c=b.render().el;a.el.appendChild(c)}),a},up:function(a){var b=a.target,c=this.hasClassName(b.className,"active"),d=this;c||(this.options.buttons.forEach(function(a){a.model.set("active",!1),a.el.className=d.removeClassName(a.el.className,"active")}),b.className=this.addClassName(b.className,"active"))}}),j=g.extend({tagName:"div",className:"agate-toggle-button",value:!1,events:{mouseup:"up",touchend:"up"},initialize:function(){g.prototype.initialize.call(this),this.value=this.options.value||!1},render:function(){var a=this;return g.prototype.render.call(this),this.onEl=this.renderOn(),this.offEl=this.renderOff(),this.knobEl=this.renderKnob(),[this.onEl,this.offEl,this.knobEl].forEach(function(b){a.el.appendChild(b)}),this},renderOn:function(){var a=this.make("div",{style:this.value?"":"display: none;","class":"agate-toggle-content on"},"On");return a},renderOff:function(){var a=this.make("div",{style:this.value?"display: none;":"","class":"agate-toggle-content off"},"Off");return a},renderKnob:function(){var a=this.make("div",{"class":"agate-toggle-button-knob"});return a},up:function(a){a.preventDefault(),this.value=!this.value;var b=this.value?this.onEl:this.offEl,c=this.value?this.offEl:this.onEl;b.style.display=null,c.style.display="none"}}),k=e.extend({tagName:"div",checkedClassName:"agate-checkbox-checked",className:"agate-checkbox agate-checkbox-img",checked:!1,events:{mousedown:"down",touchstart:"down"},render:function(){return this.checked?this.addClass(this.checkedClassName):this.removeClass(this.checkedClassName),this},down:function(a){a.preventDefault(),this.checked=!this.checked,this.render()}}),l=Backbone.Model.extend({defaults:{header:!1,headerText:""}}),m=e.extend({tagName:"div",className:"agate-groupbox",model:new l,initialize:function(){this.model instanceof l||(this.model=new l(this.model))},render:function(){if(this.model.get("header")){var a=this.renderHeader();this.el.appendChild(a)}return this},renderHeader:function(){return this.make("div",{"class":"agate-groupbox-header"},this.model.get("headerText"))}}),n=Backbone.Model.extend({defaults:{text:""}}),o=e.extend({tagName:"div",className:"agate agate-toolbar agate-toolbar-inline agate-toolbar-centered",model:new n,initialize:function(){this.model instanceof n||(this.model=new n(this.model))},render:function(){return this.el.textContent=this.model.get("text"),this}}),p=Backbone.Model.extend({defaults:{placeholder:"",text:""}}),q=e.extend({tagName:"label",className:"agate-input-decorator",model:new p,initialize:function(){this.model instanceof p||(this.model=new p(this.model)),this.model.on("change:text",this.setText,this)},render:function(){var a=this.renderInput();return this.el.appendChild(a),this},renderInput:function(){return this.inputEl=this.make("input",{"class":"agate-input",placeholder:this.model.get("placeholder"),value:this.model.get("text")}),this.inputEl},setText:function(){var a=this.model.get("text");this.inputEl.value=a},setFocused:function(a){a.preventDefault(),this.addClass("agate-focused")},setBlurred:function(a){a.preventDefault(),this.removeClass("agate-focused")}}),r=q.extend({tagName:"label",className:"agate-textarea-decorator",model:new p,initialize:function(){this.model instanceof p||(this.model=new p(this.model)),this.model.on("change:text",this.setText,this)},render:function(){return this.renderTextarea(),this.el.appendChild(this.textareaEl),this},renderTextarea:function(){return this.textareaEl=this.make("textarea",{"class":"agate-textarea agate-input",placeholder:this.model.get("placeholder"),value:this.model.get("text")}),this.textareaEl},setText:function(){var a=this.model.get("text");this.textareaEl.value=a}});this.Agate={View:e,Toolbar:n,ToolbarView:o,Button:f,ButtonView:g,RadioButtonView:h,RadioGroupView:i,ToggleButtonView:j,CheckboxView:k,Groupbox:l,GroupboxView:m,Input:p,InputView:q,TextareaView:r}})).call(this);